{% extends "admin_base.html" %} 
{% block admin_content %}

<h2>Manage Candidates</h2>

<form method="POST" action="{{ url_for('manage_candidates') }}">
  <input type="hidden" name="action" value="add">
  <input type="text" name="name" placeholder="Candidate Name" required>
  <select name="position_id" required>
    <option value="" disabled selected>Select Position</option>
    {% for pos in positions %}
      <option value="{{ pos.id }}">{{ pos.name }}</option>
    {% endfor %}
  </select>
  <button type="submit">âž• Add Candidate</button>
</form>

<hr>

<h3>Existing Candidates</h3>
<table>
  <tr>
    <th>Name</th>
    <th>Position</th>
    <th>Actions</th>
  </tr>
  {% for c in candidates %}
  <tr>
    <td>{{ c.name }}</td>
    <td>{{ c.position }}</td>
    <td>
      <form method="POST" action="{{ url_for('manage_candidates') }}" style="display: inline;">
        <input type="hidden" name="action" value="edit">
        <input type="hidden" name="id" value="{{ c.id }}">
        <input type="text" name="name" value="{{ c.name }}" required>
        <select name="position_id" required>
          {% for pos in positions %}
            <option value="{{ pos.id }}" {% if pos.name == c.position %}selected{% endif %}>{{ pos.name }}</option>
          {% endfor %}
        </select>
        <button type="submit">Update</button>
      </form>
      <form method="POST" action="{{ url_for('manage_candidates') }}" style="display: inline;">
        <input type="hidden" name="action" value="delete">
        <input type="hidden" name="id" value="{{ c.id }}">
        <button type="submit" onclick="return confirm('Delete this candidate?')">Delete</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>

<!-- <a href="{{ url_for('admin_dashboard') }}"><button>Back to Dashboard</button></a> --!>
{% endblock %}
