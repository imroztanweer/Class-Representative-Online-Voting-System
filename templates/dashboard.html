{% extends "admin_base.html" %}
{% block admin_content %}

<h1 style="color: black;">Admin Dashboard</h1>

<div class="info-box" style="color: black;">
  <p><strong>Total Voters:</strong> {{ total }}</p>
  <p><strong>Voted:</strong> {{ voted }}</p>
</div>

<!-- Add Voter Button -->
<div style="margin-bottom: 1rem;">
  <a href="{{ url_for('add_student') }}">
    <button>➕ Add New Voter</button>
  </a>
</div>

<h3 style="color: black;">Voter List:</h3>
<table style="color: black; width: 100%;">
  <thead>
    <tr>
      <th>Reg No</th>
      <th>Name</th>
      <th>Course</th>
      <th>Batch</th>
      <th>Voted</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for s in students %}
    <tr>
      <td>{{ s.regno }}</td>
      <td>{{ s.name }}</td>
      <td>{{ s.course }}</td>
      <td>{{ s.batch }}</td>
      <td>
        {% if s.voted %}
          <span style="color:limegreen;">Yes</span>
        {% else %}
          <span style="color:crimson;">No</span>
        {% endif %}
      </td>
      <td>
        {% if s.regno != 'admin' %}
          <a href="{{ url_for('edit_student', regno=s.regno) }}" class="button" style="padding: 4px 8px; margin-right: 6px;">✏️ Edit</a>
          <form method="POST" action="{{ url_for('delete_student', regno=s.regno) }}" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this student?');">
            <button type="submit" class="button" style="color: red; background: transparent; border: none; cursor: pointer;">🗑️</button>
          </form>
        {% else %}
          <span style="color: gray;">—</span>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
